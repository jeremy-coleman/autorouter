"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var fs=require("fs"),path=require("path"),express_1=require("express"),AutoRouter=function(){function e(e){this.base="routes",this.force=!1,e&&(e.base&&(this.base=e.base),e.force&&(this.force=e.force)),this.base[0]!==path.sep&&(this.base=path.join(process.cwd(),this.base))}return e.getName=function(e){var t=e.match(/^(.+?)(\.(js|ts)|)$/);t[0];return{filebase:t[1],extension:t[2]}},e.getFiles=function(e){return fs.readdirSync(e)},e.prototype.getRoutingFilesRecursively=function(t,r,s){var i=this;void 0===s&&(s={});var o=function(o){var n=e.getName(o),u=n.filebase,a=n.extension,c=path.join(t,o),f=r+("index"===u?"":u);if(1!==f.length&&"/"===f[f.length-1]&&(f=f.slice(0,-1)),!a)return void i.getRoutingFilesRecursively(c,f+"/",s);if(s[f]){var h="Route "+f+" already exists in route map";if(!i.force)throw new Error(h);console.warn(h)}s[f]=c};return e.getFiles(t).map(o),s},e.prototype.getRouter=function(){for(var e=express_1.Router(),t=this.getRoutingFilesRecursively(this.base,"/"),r=Object.keys(t),s=r.length;s--;){var i=r[s],o=require(t[i]);e.use(i,o)}return e},e}();exports.AutoRouter=AutoRouter;